<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Introduction to Python with Pandas</title>
<meta name="description" content="">
<link rel="canonical" href="/course/archive.html">
<link rel="stylesheet" href="https://cdn.rawgit.com/sesync-ci/lesson-style/v1.3/docs/css/default.css">
<link rel="stylesheet" href="https://cdn.rawgit.com/sesync-ci/lesson-style/v1.3/docs/css/static.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>

  </head>
  <body>
    <div class="page-content">
      <div class="wrapper">
        
        
<h1 style="text-transform: none;" id="introduction-to-python-with-pandas">Introduction to Python with Pandas</h1>

<p>Lesson 6 with <em>Ian Carroll</em></p>

<h2 id="contents">Contents</h2>

<ul>
  <li><a href="#/slides/objective">Why learn Python?</a></li>
  <li><a href="#/slides/assignment">Variables</a></li>
  <li><a href="#/slides/types">Data types</a></li>
  <li><a href="#/slides/structs">Data structures</a></li>
  <li><a href="#/slides/comps">Iteration</a></li>
  <li><a href="#/slides/flow">Flow control</a></li>
  <li><a href="#/slides/def">Function definition</a></li>
  <li><a href="#/slides/pandas">Pandas</a></li>
  <li><a href="#/slides/conclude">Summary</a></li>
  <li><a href="#/slides/solutions">Exercise solutions</a></li>
</ul>

<hr />

<p><a name="/slides/objective"></a></p>

<h2 id="why-learn-python">Why learn Python?</h2>

<ul>
  <li>
    <p>Write scripts clearly and quickly</p>
  </li>
  <li>High-performance scientific computing
    <ul>
      <li>e.g. NumPy and SciKits</li>
    </ul>
  </li>
  <li>
    <p>Common in and out of academia</p>
  </li>
  <li>
    <p>Helpful user community on <a href="https://stackoverflow.com">https://stackoverflow.com</a></p>
  </li>
  <li>The scripting language for ArcGIS and QGIS</li>
</ul>

<h2 id="objectives-for-this-lesson">Objectives for this Lesson</h2>

<ul>
  <li>
    <p>Earn your Python “learner’s permit”</p>
  </li>
  <li>
    <p>Work with Pandas, the <code class="highlighter-rouge">DataFrame</code> package</p>
  </li>
  <li>
    <p>Recognize differences between R and Python</p>
  </li>
</ul>

<h2 id="specific-achievements">Specific Achievements</h2>

<ul>
  <li>
    <p>Differentiate between data types and structures</p>
  </li>
  <li>
    <p>Use “comprehensions” and define functions</p>
  </li>
  <li>
    <p>Learn to use indentation as syntax</p>
  </li>
  <li>
    <p>Import data and try a simple “split-apply-combine”</p>
  </li>
</ul>

<h2 id="jupyter">Jupyter</h2>

<p class="notes">Open up <code class="highlighter-rouge">worksheet-6.ipynb</code> after signing into JupyterHub. This worksheet
is an Jupyter Notebook document: it is divided into “cells” that are run
independently but access the same Python interpreter. Use the Notebook to write
and annotate code.</p>

<p>After opening <code class="highlighter-rouge">worksheet-6.ipynb</code>, right click anywhere in your notebook and choose “Create Console for Notebook”. Drag-and-drop the tabs into whatever arrangement you like.</p>

<p class="ToS"><a href="#/slides/objective">Top of Section</a></p>

<hr />

<p><a name="/slides/assignment"></a></p>

<h2 id="variables">Variables</h2>

<p>Variable assignment attaches the label left of an <code class="highlighter-rouge">=</code> to the return
value of the expression on its right.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">=</span> <span class="s">'xyz'</span>
<span class="n">a</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 'xyz'
</code></pre></div></div>

<p class="notes">Colloquially, you might say the new variable <code class="highlighter-rouge">a</code> equals <code class="highlighter-rouge">'xyz'</code>, but
Python makes it easy to “go deeper”. There can be only one string
<code class="highlighter-rouge">'xyz'</code>, so the Python interpreter makes <code class="highlighter-rouge">a</code> into another label for
the same <code class="highlighter-rouge">'xyz'</code>, which we can verify by <code class="highlighter-rouge">id()</code>.</p>

<p>The “in-memory” location of <code class="highlighter-rouge">a</code> returned by <code class="highlighter-rouge">id()</code> …</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 4388719672
</code></pre></div></div>

<p>… is equal to that of <code class="highlighter-rouge">xyz</code> itself:</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">id</span><span class="p">(</span><span class="s">'xyz'</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 4388719672
</code></pre></div></div>

<p>The idiom to test this “sameness” is typical of the Python language:
it uses plain English when words will suffice.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="ow">is</span> <span class="s">'xyz'</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: True
</code></pre></div></div>

<h2 id="equal-but-not-the-same">Equal but not the Same</h2>

<p>The <code class="highlighter-rouge">id()</code> function helps demonstrate that “equal” is not the “same”.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 4388891208
</code></pre></div></div>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">id</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 4388401672
</code></pre></div></div>

<p>Even though <code class="highlighter-rouge">b == [1, 2, 3]</code> returns <code class="highlighter-rouge">True</code>, these are not the same
object:</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">b</span> <span class="ow">is</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: False
</code></pre></div></div>

<h2 id="side-effects">Side-effects</h2>

<p>The reason to be aware of what <code class="highlighter-rouge">b</code> <strong>is</strong> has to do with
“side-effects”, an import part of Python programming. A side-effect
occurs when an expression generates some ripples other than its return
value. And side-effects don’t change the label, they effect what the
label is assigned to (i.e. what it <strong>is</strong>).</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">b</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="n">b</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: [1, 2]
</code></pre></div></div>

<dl>
  <dt>Question</dt>
  <dd>Re-check the “in-memory” location—is it the same <code class="highlighter-rouge">b</code>?</dd>
  <dt>Answer</dt>
  <dd class="fragment">Yes! The list got shorter but it is the same list.</dd>
</dl>

<p>Side-effects trip up Python programmers when an object has multiple
labels, which is not so unusual:</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">c</span> <span class="o">=</span> <span class="n">b</span>
<span class="n">b</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 2
</code></pre></div></div>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">c</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: [1]
</code></pre></div></div>

<p>The assignment to <code class="highlighter-rouge">c</code> does not create a new list, so the side-effect
of popping off the tail of <code class="highlighter-rouge">b</code> ripples into <code class="highlighter-rouge">c</code>.</p>

<p class="notes">A common mistake for those coming to Python from R, is to write <code class="highlighter-rouge">b =
b.append(4)</code>, which overwrites <code class="highlighter-rouge">b</code> with the value <code class="highlighter-rouge">None</code> that happens
to be returned by the <code class="highlighter-rouge">append()</code> method.</p>

<p>Not every object is “mutable” like our list <code class="highlighter-rouge">b</code>. For example, the <code class="highlighter-rouge">a</code>
assigned earlier is not.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="n">a</span>
<span class="n">a</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 'XYZ'
</code></pre></div></div>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 'xyz'
</code></pre></div></div>

<p>The string ‘xyz’ hasn’t changed—it’s immutable. So it is also a safe
guess that there has been no side-effect on the original <code class="highlighter-rouge">a</code>.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 'xyz'
</code></pre></div></div>

<p class="ToS"><a href="#/slides/assignment">Top of Section</a></p>

<hr />

<p><a name="/slides/types"></a></p>

<h2 id="data-types">Data types</h2>

<p>The immutable data types are</p>

<table>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">'int'</code></td>
      <td>Integer</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">'float'</code></td>
      <td>Real number</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">'str'</code></td>
      <td>Character string</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">'bool'</code></td>
      <td><code class="highlighter-rouge">True</code>/<code class="highlighter-rouge">False</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">'tuple'</code></td>
      <td>Immutable sequence</td>
    </tr>
  </tbody>
</table>

<p>Any object can be queried with <code class="highlighter-rouge">type()</code></p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">T</span> <span class="o">=</span> <span class="s">'x'</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span>
<span class="nb">type</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="nb">type</span><span class="p">(</span><span class="s">'x'</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: str
</code></pre></div></div>

<h2 id="operators">Operators</h2>

<p>Python supports the usual arithmetic operators for numeric types:</p>

<table>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">+</code></td>
      <td>addition</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">-</code></td>
      <td>subtraction</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">*</code></td>
      <td>multiplication</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">/</code></td>
      <td>floating-point division</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">**</code></td>
      <td>exponent</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">%</code></td>
      <td>modulus</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">//</code></td>
      <td>floor division</td>
    </tr>
  </tbody>
</table>

<p>One or both of these might be a surprise:</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">5</span> <span class="o">**</span> <span class="mi">2</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 25
</code></pre></div></div>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">2</span> <span class="o">//</span> <span class="mi">3</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 0
</code></pre></div></div>

<p>Some operators have natural extensions to non-numeric types:</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">a</span> <span class="o">*</span> <span class="mi">2</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 'xyzxyz'
</code></pre></div></div>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">T</span> <span class="o">+</span> <span class="p">(</span><span class="mf">3.14</span><span class="p">,</span> <span class="s">'y'</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: ('x', 3, True, 3.14, 'y')
</code></pre></div></div>

<p>Comparison operators are symbols or plain english:</p>

<table>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">==</code></td>
      <td>equal</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">!=</code></td>
      <td>non-equal</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&gt;</code>, <code class="highlighter-rouge">&lt;</code></td>
      <td>greater, lesser</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&gt;=</code>, <code class="highlighter-rouge">&lt;=</code></td>
      <td>greater or equal, lesser or equal</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">and</code></td>
      <td>logical and</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">or</code></td>
      <td>logical or</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">not</code></td>
      <td>logical negation</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">in</code></td>
      <td>logical membership</td>
    </tr>
  </tbody>
</table>

<h2 id="exercise-1">Exercise 1</h2>

<p>Explore the use of <code class="highlighter-rouge">in</code> to test membership in a list. Create a list of
multiple integers, and use <code class="highlighter-rouge">in</code> to test membership of some other
numbers in your list.</p>

<p class="notes"><a href="#solution-1">View solution</a></p>

<p class="ToS"><a href="#/slides/types">Top of Section</a></p>

<hr />

<p><a name="/slides/structs"></a></p>

<h2 id="data-structures">Data structures</h2>

<p>The built-in structures for holding multiple values are:</p>

<ul>
  <li>Tuple</li>
  <li>List</li>
  <li>Set</li>
  <li>Dictionary</li>
</ul>

<h2 id="tuple">Tuple</h2>

<p>The simplest kind of sequence, a tuple is declared with
comma-separated values, optionally inside <code class="highlighter-rouge">()</code>.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">T</span> <span class="o">=</span> <span class="s">'x'</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">True</span>
<span class="nb">type</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: tuple
</code></pre></div></div>

<p>Note that to declare a one-tuple without “(“, a trailing “,” is required.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">T</span> <span class="o">=</span> <span class="s">'cat'</span><span class="p">,</span>
<span class="nb">type</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: tuple
</code></pre></div></div>

<h2 id="list">List</h2>

<p>The more common kind of sequence in Python is the list, which is
declared with comma-separated values inside <code class="highlighter-rouge">[]</code>. Unlike a tuple, a
list is mutable.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="mf">3.14</span><span class="p">,</span> <span class="s">'xyz'</span><span class="p">,</span> <span class="n">T</span><span class="p">]</span>
<span class="nb">type</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: list
</code></pre></div></div>

<h2 id="subsetting-tuples-and-lists">Subsetting Tuples and Lists</h2>

<p>Subsetting elements from a tuple or list is performed with square
brackets in both cases, and selects elements using their integer
position starting from zero—their “index”.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 3.14
</code></pre></div></div>

<p>Negative indices are allowed, and refer to the reverse ordering: -1 is
the last item in the list, -2 the second-to-last item, and so on.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">L</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: ('cat',)
</code></pre></div></div>

<p>The syntax <code class="highlighter-rouge">L[i:j]</code> selects a sub-list starting with the element at index
<code class="highlighter-rouge">i</code> and ending with the element at index <code class="highlighter-rouge">j - 1</code>.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: [3.14, 'xyz']
</code></pre></div></div>

<p>A blank space before or after the “:” indicates the start or end of the list,
respectively. For example, the previous example could have been written 
<code class="highlighter-rouge">L[:2]</code>.</p>

<p>A potentially useful trick to remember the list subsetting rules in Python is
to picture the indices as “dividers” between list elements.</p>

<div class="input highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 0      1       2          3 
 | 3.14 | 'xyz' | ('cat',) |
-3     -2      -1
</code></pre></div></div>

<p>Positive indices are written at the top and negative indices at the bottom. 
<code class="highlighter-rouge">L[i]</code> returns the element to the right of <code class="highlighter-rouge">i</code> whereas <code class="highlighter-rouge">L[i:j]</code> returns
elements between <code class="highlighter-rouge">i</code> and <code class="highlighter-rouge">j</code>.</p>

<h2 id="set">Set</h2>

<p>The third and last “sequence” data structure is a set, used mainly for quick access to set operations like “union” and “difference”. Declare a set with comma-separated values inside <code class="highlighter-rouge">{}</code> or by casting another sequence with <code class="highlighter-rouge">set()</code>.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">S1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">L</span><span class="p">)</span>
<span class="n">S2</span> <span class="o">=</span> <span class="p">{</span><span class="mf">3.14</span><span class="p">,</span> <span class="s">'z'</span><span class="p">}</span>
<span class="n">S1</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">S2</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: {('cat',), 'xyz'}
</code></pre></div></div>

<p class="notes">Python is a rather principled language: a set is technically unordered, so its elements do not have an index. You cannot subset a set using <code class="highlighter-rouge">[]</code>.</p>

<h2 id="dictionary">Dictionary</h2>

<p>Lists are useful when you need to access elements by their position in
a sequence. In contrast, a dictionary is needed to find values based
on arbitrary identifiers.</p>

<p>Construct a dictionary with comma-separated <code class="highlighter-rouge">key: value</code> pairs in <code class="highlighter-rouge">{}</code>.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">toons</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Snowy'</span><span class="p">:</span> <span class="s">'dog'</span><span class="p">,</span>
  <span class="s">'Garfield'</span><span class="p">:</span> <span class="s">'cat'</span><span class="p">,</span>
  <span class="s">'Bugs'</span><span class="p">:</span> <span class="s">'bunny'</span><span class="p">,</span>
<span class="p">}</span>
<span class="nb">type</span><span class="p">(</span><span class="n">toons</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: dict
</code></pre></div></div>

<p>Individual values are accessed using square brackets, as for lists,
but the key must be used rather than an index.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">toons</span><span class="p">[</span><span class="s">'Bugs'</span><span class="p">]</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 'bunny'
</code></pre></div></div>

<p>To add a single new element to the dictionary, define a new
<code class="highlighter-rouge">key:value</code> pair by assigning a value to a novel key in the
dictionary.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">toons</span><span class="p">[</span><span class="s">'Goofy'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'dog'</span>
<span class="n">toons</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: {'Bugs': 'bunny', 'Garfield': 'cat', 'Goofy': 'dog', 'Snowy': 'dog'}
</code></pre></div></div>

<p>Dictionary keys are unique. Assigning a value to an existing key
overwrites its previous value.</p>

<h2 id="exercise-2">Exercise 2</h2>

<p>Based on what we have learned so far about lists and dictionaries,
think up a data structure suitable for an address book of names and
emails. Now create it! Enter the name and email address for yourself
and your neighbor in a new variable called <code class="highlighter-rouge">addr</code>.</p>

<p class="notes"><a href="#solution-2">View solution</a></p>

<p class="ToS"><a href="#/slides/structs">Top of Section</a></p>

<hr />

<p><a name="/slides/comps"></a></p>

<h2 id="iteration">Iteration</h2>

<p>The data structures just discussed have multiple values. Subsetting is
one way to get at them individually. Stepping through all values is
called iterating.</p>

<p>Python formally declares a thing “iterable” if it can be used in an
expression <code class="highlighter-rouge">for x in y</code>. where <code class="highlighter-rouge">y</code> is the iterable thing and <code class="highlighter-rouge">x</code> will
label each element in turn.</p>

<h2 id="declarations-with-iterables">Declarations with Iterables</h2>

<p>Packing the <code class="highlighter-rouge">for x in y</code> expression inside a sequence declaration is
one way to build a sequence.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">letters</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="s">'abcde'</span><span class="p">]</span>
<span class="n">letters</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: ['a', 'b', 'c', 'd', 'e']
</code></pre></div></div>

<p>This way of declaring with <code class="highlighter-rouge">for</code> and <code class="highlighter-rouge">in</code> is called a “comprehension” in Python.</p>

<h2 id="dictionary-comprehension">Dictionary Comprehension</h2>

<p>To declare a dictionary in this way, specify a <code class="highlighter-rouge">key:value</code> pair.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">CAPS</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="s">'abcde'</span><span class="p">}</span>
<span class="n">CAPS</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: {'a': 'A', 'b': 'B', 'c': 'C', 'd': 'D', 'e': 'E'}
</code></pre></div></div>

<p class="ToS"><a href="#/slides/comps">Top of Section</a></p>

<hr />

<p><a name="/slides/flow"></a></p>

<h2 id="flow-control">Flow control</h2>

<p>The list and dictionary comprehensions embed a short form of the
expression used to initiate a looping control statement.</p>

<h2 id="for-loops">For loops</h2>

<p>A <code class="highlighter-rouge">for</code> loop takes any iterable object and executes a block of code
once for each element <code class="highlighter-rouge">in</code> the iterable..</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">squares</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">**</span> <span class="mi">2</span>
    <span class="n">squares</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 4
</code></pre></div></div>

<p class="notes">The <code class="highlighter-rouge">range(i, j)</code> function creates a list of integers from <code class="highlighter-rouge">i</code> up
through <code class="highlighter-rouge">j - 1</code>; just like in the case of list slices, the range is
not inclusive of the upper bound.</p>

<h2 id="indentation">Indentation</h2>

<p>Note the pattern of the block above:</p>

<ul>
  <li>the <code class="highlighter-rouge">for x in y</code> expression is followed by a colon</li>
  <li>the following lines are indented <strong>equally</strong></li>
  <li>un-indenting indicates the end of the block</li>
</ul>

<p class="notes">Compared with other programming languages in which code indentation
only serves to enhance readability, Python uses indentation (and
<strong>only</strong> indentation) to define “code blocks”, a.k.a. statements.</p>

<h2 id="nesting-indentation">Nesting indentation</h2>

<p>Each level of indentation indicates blocks within blocks. Nesting a
conditional within a for-loop is a common case.</p>

<p class="notes">The following example creates a contact list (as a list of
dictionaries), then performs a loop over all contacts. Within the
loop, a conditional statement (<code class="highlighter-rouge">if</code>) checks if the name is ‘Alice’. If
so, the interpreter prints the phone number; otherwise it prints the
name (<code class="highlighter-rouge">else</code> block).</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">contacts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s">'name'</span><span class="p">:</span><span class="s">'Alice'</span><span class="p">,</span> <span class="s">'phone'</span><span class="p">:</span><span class="s">'555-111-2222'</span><span class="p">},</span>
    <span class="p">{</span><span class="s">'name'</span><span class="p">:</span><span class="s">'Bob'</span><span class="p">,</span> <span class="s">'phone'</span><span class="p">:</span><span class="s">'555-333-4444'</span><span class="p">},</span>
    <span class="p">]</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">contacts</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'Alice'</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s">'phone'</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s">'name'</span><span class="p">])</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>555-111-2222
Bob
</code></pre></div></div>

<h2 id="exercise-3">Exercise 3</h2>

<p>Write a for loop that prints all even numbers between 1 and 9. Use the
modulo operator (<code class="highlighter-rouge">%</code>) to check for evenness: if <code class="highlighter-rouge">i</code> is even, then <code class="highlighter-rouge">i %
2</code> returns <code class="highlighter-rouge">0</code>, because <code class="highlighter-rouge">%</code> gives the remainder after division of the
first number by the second.</p>

<p class="notes"><a href="#solution-3">View solution</a></p>

<p class="ToS"><a href="#/slides/flow">Top of Section</a></p>

<hr />

<p><a name="/slides/def"></a></p>

<h2 id="function-definition">Function definition</h2>

<p>We already saw examples of a few built-in functions, such as <code class="highlighter-rouge">type()</code>
and <code class="highlighter-rouge">len()</code>.  New functions are defined as a block of code starting
with a <code class="highlighter-rouge">def</code> keyword and (optionally) finishing with a <code class="highlighter-rouge">return</code>.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">add_two</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>

<p>The <code class="highlighter-rouge">def</code> keyword is followed by the function name, its arguments enclosed in
parentheses (separated by commas if there are more than one), and a colon.</p>

<p>The <code class="highlighter-rouge">return</code> statement is needed to make the function provide output.
The lack of a <code class="highlighter-rouge">return</code>, or <code class="highlighter-rouge">return</code> followed by nothing, causes the function to return the value <code class="highlighter-rouge">None</code>.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">add_two</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 12
</code></pre></div></div>

<p>This function is invoked by name followed by any arguments in
parentheses and <strong>in the order defined</strong>.</p>

<h2 id="default-arguments">Default arguments</h2>

<p>A default value can be “assigned” during function definition.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">add_any</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>

<p>Then the function can be called without that argument:</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">add_any</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 10
</code></pre></div></div>

<p>Adding an argument will override the default:</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">add_any</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 15
</code></pre></div></div>

<h2 id="methods">Methods</h2>

<p>The period is a special character in Python that accesses an object’s
attributes and methods. In either the Jupyter Notebook or Console,
typing an object’s name followed by <code class="highlighter-rouge">.</code> and then pressing the <code class="highlighter-rouge">TAB</code>
key brings up suggestions.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">squares</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 1
</code></pre></div></div>

<p>We call this <code class="highlighter-rouge">index()</code> function a method of lists (recall that
<code class="highlighter-rouge">squares</code> is of type <code class="highlighter-rouge">'list'</code>). A useful feature of having methods
attached to objects is that we can dial up help on a method as it
applies to any instance of a type.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">help</span><span class="p">(</span><span class="n">squares</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Help on built-in function index:

index(...) method of builtins.list instance
    L.index(value, [start, [stop]]) -&gt; integer -- return first index of value.
    Raises ValueError if the value is not present.

</code></pre></div></div>

<p class="notes">A major differnce between Python and R has to do with the process for making functions behave differently for different objects. In Python, a function is attached to an object as a “method”, while in R a “dispatcher” examines the attributes of a function call’s arguments and chooses a the particular function to use.</p>

<h2 id="a-dictionary-method">A dictionary method</h2>

<p>The <code class="highlighter-rouge">update()</code> method allows you to extend a dictionary with another dictionary of <code class="highlighter-rouge">key:value</code> pairs, while simultaneously overwriting values for existing keys.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">toons</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
  <span class="s">'Tweety'</span><span class="p">:</span> <span class="s">'bird'</span><span class="p">,</span>
  <span class="s">'Bob'</span><span class="p">:</span> <span class="s">'sponge'</span><span class="p">,</span>
  <span class="s">'Bugs'</span><span class="p">:</span> <span class="s">'rabbit'</span><span class="p">,</span>
<span class="p">})</span>
</code></pre></div></div>

<dl>
  <dt>Question</dt>
  <dd>How many <code class="highlighter-rouge">key: value</code> pairs are there now in toons?</dd>
  <dt>Answer</dt>
  <dd class="fragment">Five. The key <code class="highlighter-rouge">'Bugs'</code> is only inserted once.</dd>
</dl>

<p>Note a couple “Pythonic” style choices of the above:</p>

<ol>
  <li>Leave a space after the <code class="highlighter-rouge">:</code> when declaring <code class="highlighter-rouge">key: value</code> pairs</li>
  <li>Trailing null arguments are syntactically correct, even advantageous</li>
  <li>White space with <code class="highlighter-rouge">()</code> has no meaning and can improve readiability</li>
</ol>

<p class="ToS"><a href="#/slides/def">Top of Section</a></p>

<hr />

<p><a name="/slides/pandas"></a></p>

<h2 id="pandas">Pandas</h2>

<p>If you have used the statistical programming language R, you are familiar with
“data frames”, two-dimensional data structures where each column can hold a 
different type of data, as in a spreadsheet.</p>

<p>The data analysis library <a href="" class="pylib">pandas</a> provides a data frame object type for
Python, along with functions to subset, filter reshape and aggregate data
stored in data frames.</p>

<p>After importing <a href="" class="pylib">pandas</a>, we call its <code class="highlighter-rouge">read_csv</code> function
to load the Portal animals data from the file <code class="highlighter-rouge">animals.csv</code>.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="n">animals</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">"data/animals.csv"</span><span class="p">)</span>
<span class="n">animals</span><span class="o">.</span><span class="n">dtypes</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 
id                   int64
month                int64
day                  int64
year                 int64
plot_id              int64
species_id          object
sex                 object
hindfoot_length    float64
weight             float64
dtype: object
</code></pre></div></div>

<p>There are many ways to slice a <code class="highlighter-rouge">DataFrame</code>. To select a subset of rows
and/or columns by name, use the <code class="highlighter-rouge">loc</code> attribute and <code class="highlighter-rouge">[</code> for indexing.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">animals</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s">'plot_id'</span><span class="p">,</span> <span class="s">'species_id'</span><span class="p">]]</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 
       plot_id species_id
0            3         NL
1            2         DM
2            7         DM
3            3         DM
4            1         PF
5            2         PE
6            1         DM
7            1         DM
8            6         PF
9            5         DS
10           7         DM
11           3         DM
12           8         DM
13           6         DM
14           4         DM
15           3         DS
16           2         PP
17           4         PF
18          11         DS
19          14         DM
20          15         NL
21          13         DM
22          13         SH
23           9         DM
24          15         DM
25          15         DM
26          11         DM
27          11         PP
28          10         DS
29          15         DM
...        ...        ...
35519        9         DM
35520        9         DM
35521        9         DM
35522        9         PB
35523        9         OL
35524        8         OT
35525       13         DO
35526       13         US
35527       13         PB
35528       13         OT
35529       13         PB
35530       14         DM
35531       14         DM
35532       14         DM
35533       14         DM
35534       14         DM
35535       14         DM
35536       15         PB
35537       15         SF
35538       15         PB
35539       15         PB
35540       15         PB
35541       15         PB
35542       15         US
35543       15         AH
35544       15         AH
35545       10         RM
35546        7         DO
35547        5        NaN
35548        2         NL

[35549 rows x 2 columns]
</code></pre></div></div>

<p>As with lists, <code class="highlighter-rouge">:</code> by itself indicates all the rows (or
columns). Unlike lists, the <code class="highlighter-rouge">loc</code> attribute returns both endpoints of
a slice.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">animals</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="s">'plot_id'</span><span class="p">:</span><span class="s">'sex'</span><span class="p">]</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 
   plot_id species_id sex
2        7         DM   M
3        3         DM   M
4        1         PF   M
</code></pre></div></div>

<p>Use the <code class="highlighter-rouge">iloc</code> attribute of a DataFrame to get rows and/or columns by
position, which behaves identically to list indexing.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">animals</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 
   plot_id species_id
2        7         DM
3        3         DM
</code></pre></div></div>

<p>The default indexing for a DataFrame, without using the <code class="highlighter-rouge">loc</code> or
<code class="highlighter-rouge">iloc</code> attributes, is by column name.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">animals</span><span class="p">[[</span><span class="s">'hindfoot_length'</span><span class="p">,</span> <span class="s">'weight'</span><span class="p">]]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 
       hindfoot_length        weight
count     31438.000000  32283.000000
mean         29.287932     42.672428
std           9.564759     36.631259
min           2.000000      4.000000
25%          21.000000     20.000000
50%          32.000000     37.000000
75%          36.000000     48.000000
max          70.000000    280.000000
</code></pre></div></div>

<p>The <code class="highlighter-rouge">loc</code> attribute also allows logical indexing, i.e. the use of a
boolean array of appropriate length for the selected dimension. The
subset of <code class="highlighter-rouge">animals</code> where the species is “DM” can be extracted with a
logical test.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">idx</span> <span class="o">=</span> <span class="n">animals</span><span class="p">[</span><span class="s">'species_id'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'DM'</span>
<span class="n">animals_dm</span> <span class="o">=</span> <span class="n">animals</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
<span class="n">animals_dm</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 
   id  month  day  year  plot_id species_id sex  hindfoot_length  weight
1   3      7   16  1977        2         DM   F             37.0     NaN
2   4      7   16  1977        7         DM   M             36.0     NaN
3   5      7   16  1977        3         DM   M             35.0     NaN
6   8      7   16  1977        1         DM   M             37.0     NaN
7   9      7   16  1977        1         DM   F             34.0     NaN
</code></pre></div></div>

<!--
===

The `query()` method accepts an expression that may reference columns,
increasing the readability of the same operation


~~~python
animals_dm = animals.query('species_id == "DM"')
animals_dm.head()
~~~
{:.input}
~~~
Out[1]: 
   id  month  day  year  plot_id species_id sex  hindfoot_length  weight
1   3      7   16  1977        2         DM   F             37.0     NaN
2   4      7   16  1977        7         DM   M             36.0     NaN
3   5      7   16  1977        3         DM   M             35.0     NaN
6   8      7   16  1977        1         DM   M             37.0     NaN
7   9      7   16  1977        1         DM   F             34.0     NaN
~~~
{:.output}


-->

<p>Aggregation of records in a DataFrame by value of a given variable is
performed with the <code class="highlighter-rouge">groupby()</code> method. The resulting “grouped”
DataFrame can apply aggregations to each group, and combine the result
into a DataFrame with one record for each group.</p>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dm_stats</span> <span class="o">=</span> <span class="p">(</span>
  <span class="n">animals_dm</span>
  <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'sex'</span><span class="p">)</span>
  <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s">'hindfoot_length'</span><span class="p">:</span> <span class="p">[</span><span class="s">'mean'</span><span class="p">,</span> <span class="s">'std'</span><span class="p">]})</span>
<span class="p">)</span>
<span class="n">dm_stats</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 
    hindfoot_length          
               mean       std
sex                          
F         35.712692  1.433067
M         36.188229  1.455396
</code></pre></div></div>

<h2 id="exercise-4">Exercise 4</h2>

<p>The <code class="highlighter-rouge">count()</code> method can be used in a pandas aggregation step to
count non-NA values in a column. Find out which month had the most
observations recorded in <code class="highlighter-rouge">animals</code> using <code class="highlighter-rouge">groupby()</code> and <code class="highlighter-rouge">count()</code>. If
you are feeling adventurous, calculate the average weight in each
month and <code class="highlighter-rouge">rename()</code> the columns to “n” and “mean_weight”.</p>

<p class="notes"><a href="#solution-4">View solution</a></p>

<p class="ToS"><a href="#/slides/pandas">Top of Section</a></p>

<hr />

<p><a name="/slides/conclude"></a></p>

<h2 id="summary">Summary</h2>

<p>Python is said to have a gentle learning curve, but all new languages take practice.</p>

<p>Key concepts covered in this lesson include:</p>

<ul>
  <li>Variable assignment</li>
  <li>Data structures</li>
  <li>Functions and methods</li>
  <li><a href="" class="pylib">pandas</a></li>
</ul>

<p>Additional critical packages for data science:</p>
<ul>
  <li><a href="" class="pylib">matplotlib</a>, <a href="" class="pylib">plotly</a>, <a href="" class="pylib">seaborn</a> for vizualization</li>
  <li><a href="" class="pylib">StatsModels</a>, <a href="" class="pylib">scikit-learn</a>, and <a href="" class="pylib">pystan</a> for model fitting</li>
  <li><a href="" class="pylib">PyQGIS</a>, <a href="" class="pylib">Shapely</a>, and <a href="" class="pylib">Cartopy</a> for GIS</li>
</ul>

<p class="ToS"><a href="#/slides/conclude">Top of Section</a></p>

<hr />

<p><a name="/slides/solutions"></a></p>

<h2 id="exercise-solutions">Exercise solutions</h2>

<h2 id="solution-1">Solution 1</h2>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">answers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span>
<span class="mi">42</span> <span class="ow">in</span> <span class="n">answers</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: True
</code></pre></div></div>

<p class="notes"><a href="#exercise-1">Return</a></p>

<h2 id="solution-2">Solution 2</h2>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">addr</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Alice'</span><span class="p">,</span> <span class="s">'email'</span><span class="p">:</span> <span class="s">'alice@gmail.com'</span><span class="p">},</span>
  <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'Bob'</span><span class="p">,</span> <span class="s">'email'</span><span class="p">:</span> <span class="s">'bob59@aol.com'</span><span class="p">},</span>
<span class="p">]</span>
</code></pre></div></div>

<p class="notes"><a href="#exercise-1">Return</a></p>

<h2 id="solution-3">Solution 3</h2>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2
4
6
8
</code></pre></div></div>

<p class="notes"><a href="#exercise-3">Return</a></p>

<h2 id="solution-4">Solution 4</h2>

<div class="language-python input highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span>
<span class="n">animals</span>
  <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'month'</span><span class="p">)</span>
  <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'count'</span><span class="p">,</span> <span class="s">'weight'</span><span class="p">:</span> <span class="s">'mean'</span><span class="p">})</span>
  <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'n'</span><span class="p">,</span> <span class="s">'weight'</span><span class="p">:</span> <span class="s">'mean_weight'</span><span class="p">})</span>
<span class="p">)</span>
</code></pre></div></div>
<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Out[1]: 
         id     weight
month                 
1      2518  41.656815
2      2796  40.569822
3      3390  42.558372
4      3443  45.290231
5      3073  46.651155
6      2697  41.161753
7      3633  39.923124
8      2369  42.575729
9      2751  43.830675
10     3064  43.879402
11     3016  43.046996
12     2799  40.408385
</code></pre></div></div>

<p class="notes"><a href="#exercise-4">Return</a></p>

<p class="ToS"><a href="#/slides/solutions">Top of Section</a></p>

<hr />



      </div>
    </div>
  <script>
 var collection = document.getElementsByClassName('rlib');
 for (var i = 0; i < collection.length; i++) {
     var a = collection[i];
     a.href = 'https://cran.r-project.org/package=' + a.innerText;
 };
 var collection = document.getElementsByClassName('pylib');
 for (var i = 0; i < collection.length; i++) {
     var a = collection[i];
     a.href = 'https://pypi.python.org/pypi/' + a.innerText;
 };
</script>

  </body>
</html>
